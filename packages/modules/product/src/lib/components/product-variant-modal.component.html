<vcl-panel-dialog
  [showCloseButton]="true"
  (close)="close()"
>
  <vcl-panel-title>{{ title }}</vcl-panel-title>

  <form
    novalidate
    [formGroup]="productVariantForm"
    #form="ngForm"
    (submit)="onSubmit()"
    vclForm
  >
    <ng-template
      [vclLayer]="{ width: '25em' }"
      #help="vclLayer"
      let-header="header"
      let-text="text"
    >
      <vcl-panel-dialog>
        <vcl-panel-title>{{ header }}</vcl-panel-title>
        {{ text }}
        <button
          vcl-button
          vclPanelFooterButton
          class="transparent outline"
          (click)="help.close()"
        >
          OK
        </button>
      </vcl-panel-dialog>
    </ng-template>

    <vcl-form-control-group>
      <vcl-label>Base template</vcl-label>
      <vcl-select placeholder="Select base template">
        <vcl-select-list
          formControlName="parentVariantId"
          selectionMode="multiple"
        >
          <vcl-select-list-item [value]="'snakeeater'">
            Snake Eater
          </vcl-select-list-item>
          <vcl-select-list-item [value]="'swiftlearner'">
            Swift Learner
          </vcl-select-list-item>
        </vcl-select-list>
      </vcl-select>
      <vcl-hint-error error="perks">You must select two perks</vcl-hint-error>
    </vcl-form-control-group>

    <vcl-form-control-group>
      <vcl-label>Offering</vcl-label>
      <vcl-select placeholder="Select base template">
        <vcl-select-list formControlName="offerings">
          <vcl-select-list-item [value]="'snakeeater'">
            Snake Eater
          </vcl-select-list-item>
          <vcl-select-list-item [value]="'swiftlearner'">
            Swift Learner
          </vcl-select-list-item>
        </vcl-select-list>
      </vcl-select>
      <vcl-hint-error error="perks">You must select two perks</vcl-hint-error>
    </vcl-form-control-group>

    <vcl-form-control-group>
      <vcl-label>Name</vcl-label>
      <div class="help-wrapper">
        <vcl-input-field>
          <input
            vclInput
            formControlName="name"
          />
        </vcl-input-field>
        <button
          vcl-button
          square
          class="transparent"
          (click)="
          help.open({
            data: {
              header: 'Name',
              text: 'The name of the hero. Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eligendi ad excepturi molestiae esse unde repellendus ex accusantium officia placeat voluptatem commodi et, laboriosam laudantium, cum, ratione debitis inventore? Esse, eaque!',
            },
          })
        "
          type="button"
        >
          <vcl-icon
            class="scale130p"
            icon="vcl:info"
          ></vcl-icon>
        </button>
      </div>
      <vcl-hint-error error="required">Name is required</vcl-hint-error>
      <vcl-hint-error error="minlength"
        >Name must have a length of at least 2 characters</vcl-hint-error
      >
    </vcl-form-control-group>

    <vcl-form-control-group>
      <vcl-label>Description</vcl-label>
      <vcl-input-field class="auto-height">
        <textarea
          vclInput
          formControlName="description"
          placeholder="Description of the hero"
          [autogrow]="true"
          [minRows]="3"
          [maxRows]="10"
        ></textarea>
      </vcl-input-field>
    </vcl-form-control-group>

    <vcl-form-control-group>
      <vcl-label>Stock level</vcl-label>
      <vcl-input-field>
        <input
          vclInput
          formControlName="stockLevel"
        />
      </vcl-input-field>
      <vcl-hint-error error="required">Stock level is required</vcl-hint-error>
    </vcl-form-control-group>

    <vcl-form-control-group>
      <vcl-label>SKU</vcl-label>
      <vcl-input-field>
        <input
          vclInput
          formControlName="stockKeepingUnit"
        />
      </vcl-input-field>
      <vcl-hint-error error="required"
        >Stock keeping unit is required</vcl-hint-error
      >
    </vcl-form-control-group>

    <vcl-form-control-group>
      <vcl-label>Taxes</vcl-label>
      <vcl-select placeholder="Select taxes">
        <vcl-select-list
          formControlName="taxIds"
          selectionMode="multiple"
        >
          <vcl-select-list-item [value]="'snakeeater'">
            Snake Eater
          </vcl-select-list-item>
          <vcl-select-list-item [value]="'swiftlearner'">
            Swift Learner
          </vcl-select-list-item>
          <vcl-select-list-item [value]="'toughness'">
            Toughness
          </vcl-select-list-item>
          <vcl-select-list-item [value]="'explorer'">
            Explorer
          </vcl-select-list-item>
        </vcl-select-list>
      </vcl-select>
      <vcl-hint-error error="perks">You must select two perks</vcl-hint-error>
    </vcl-form-control-group>

    <fieldset formGroupName="price">
      <vcl-form-control-group>
        <vcl-label>Currency</vcl-label>
        <vcl-select placeholder="Select currency">
          <vcl-select-list formControlName="currencyId">
            <vcl-select-list-item [value]="'snakeeater'">
              Snake Eater
            </vcl-select-list-item>
            <vcl-select-list-item [value]="'swiftlearner'">
              Swift Learner
            </vcl-select-list-item>
            <vcl-select-list-item [value]="'toughness'">
              Toughness
            </vcl-select-list-item>
            <vcl-select-list-item [value]="'explorer'">
              Explorer
            </vcl-select-list-item>
          </vcl-select-list>
        </vcl-select>
      </vcl-form-control-group>

      <vcl-form-control-group>
        <vcl-label>Regular price</vcl-label>
        <vcl-input-field>
          <input
            vclInput
            formControlName="regularPrice"
          />
        </vcl-input-field>
        <vcl-hint-error error="required"
          >Regular price is required</vcl-hint-error
        >
      </vcl-form-control-group>

      <vcl-form-control-group>
        <vcl-checkbox formControlName="sale">On sales</vcl-checkbox>
      </vcl-form-control-group>

      <!-- TODO: Condiional: if sales is true. -->
      <vcl-form-control-group>
        <vcl-label>Sale price</vcl-label>
        <vcl-input-field>
          <input
            vclInput
            formControlName="salePrice"
          />
        </vcl-input-field>
      </vcl-form-control-group>
    </fieldset>

    <div class="loose-button-group mt-3">
      <button
        vcl-button
        type="submit"
        class="emphasized"
      >
        Submit
      </button>
      <button
        vcl-button
        type="button"
      >
        Reset
      </button>
    </div>
  </form>
</vcl-panel-dialog>
