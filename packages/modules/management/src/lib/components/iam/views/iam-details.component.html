<header>
  <h3>User detail</h3>
</header>

<vcl-tab-nav>
  <vcl-tab>
    <vcl-label>Overview</vcl-label>

    <vcl-data-list
      mode="none"
      [noBorder]="true"
    >
      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Name</dt>
          <dd>{{ vm.user.name }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>First name</dt>
          <dd>{{ vm.user.firstName || '—' }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Last name</dt>
          <dd>{{ vm.user.lastName || '—' }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Email</dt>
          <dd>{{ vm.user.email || '—' }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Locale</dt>
          <dd>{{ vm.user.localeId || '—' }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Timezone ID</dt>
          <dd>{{ vm.user.timezoneId || '—' }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Default scope</dt>
          <dd>{{ vm.user.defaultScope || '—' }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Invite</dt>
          <dd>{{ vm.user.invite || '—' }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Guest</dt>
          <dd>{{ vm.user.guest || '—' }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Activation code</dt>
          <dd>{{ vm.user.activationCode || '—' }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Last access</dt>
          <dd>{{ vm.user.lastAccess || '—' }}</dd>
        </div>
      </vcl-data-list-item>

      <vcl-data-list-item>
        <div class="row justify-between align-items">
          <dt>Status</dt>
          <dd>{{ vm.user.lastAccess || '—' }}</dd>
        </div>
      </vcl-data-list-item>
    </vcl-data-list>
  </vcl-tab>
  <vcl-tab>
    <vcl-label>Roles ({{ vm.user.roles?.length || 0 }})</vcl-label>
    <rc-table>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Description</th>
            <th>Assignable By</th>
          </tr>
        </thead>
        <tbody>
          @for (r of vm.user.roles ?? []; track r.id) {
          <tr>
            <td>{{ r.id }}</td>
            <td>{{ r.name }}</td>
            <td>{{ r.description || '—' }}</td>
            <td>
              @if (r.assignableByRoles?.length) {
              {{ r.assignableByRoles?.join(', ') }}
              } @else { — }
            </td>
          </tr>
          }
        </tbody>
      </table>
    </rc-table>
  </vcl-tab>
  <vcl-tab>
    <vcl-label
      >Role Associations ({{ vm.user.roleAssociations.length || 0 }})</vcl-label
    >
    <rc-table>
      <table>
        <thead>
          <tr>
            <th>Role</th>
            <th>Attributes</th>
          </tr>
        </thead>
        <tbody>
          @for (ra of vm.user.roleAssociations; track ra.id) {
          <tr>
            <td>{{ ra.role }}</td>
            <td>
              @if (attrPairs(ra.attributes).length) {
              <ul>
                @for (p of attrPairs(ra.attributes); track p.id) {
                <li>
                  <span class="text-gray-600">{{ p.path }}:</span>
                  <code>{{ p.value || '—' }}</code>
                </li>
                }
              </ul>
              } @else { — }
            </td>
          </tr>
          }
        </tbody>
      </table>
    </rc-table>
  </vcl-tab>
</vcl-tab-nav>
