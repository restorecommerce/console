<header class="flex items-center justify-between gap-4">
  <div>
    <h3 class="text-xl font-semibold">
      Fulfilment
      <span class="text-gray-500">#{{ fulfillment.id | slice : 0 : 8 }}…</span>
    </h3>
    <div class="text-sm text-gray-600 mt-2">
      <vcl-badge type="info">{{ fulfillment.fulfillmentState }}</vcl-badge>
      <span class="ml-3"
        >Shipment #: {{ fulfillment.labels[0].shipmentNumber || '—' }}</span
      >
      <span class="ml-3"
        >Created: {{ fulfillment.meta.created | date : 'medium' }}</span
      >
    </div>
    <div class="text-xs text-gray-500 mt-2">
      Shop: {{ fulfillment.shopId }} · Customer: {{ fulfillment.customerId }} ·
      User:
      {{ fulfillment.userId }}
    </div>
  </div>
  <div class="row gap-2 mt-3">
    <button
      vcl-button
      [disabled]="!fulfillment.labels[0]?.file?.url"
    >
      Open Label URL
    </button>
    <button
      vcl-button
      class="transparent outline ml-2"
    >
      Reprint
    </button>
    <button
      vcl-button
      class="transparent outline ml-2"
    >
      Retry
    </button>
  </div>
</header>

<section class="row mt-4">
  <div class="flex-6-md pr-2">
    <rc-card title="Summary">
      <div>Parcels: {{ fulfillment.packaging?.parcels?.length }}</div>
      <div>Items: {{ 99 }}</div>
      <div>Total Weight: {{ 999.999 | number : '1.3-3' }} kg</div>
      <!-- <div *ngIf="maxDims">
        Max dims: {{ maxDims.width }}×{{ maxDims.length }}×{{ maxDims.height }}
        cm
      </div> -->
    </rc-card>
  </div>

  <div class="flex-6-md pl-2">
    <rc-card title="Carrier Label">
      <div>State: {{ fulfillment.labels[0]?.state || '—' }}</div>
      <div>
        Status: {{ fulfillment.labels[0]?.status?.message?.trim() || '—' }}
      </div>
      <a
        *ngIf="fulfillment.labels[0]?.file?.url"
        [href]="fulfillment.labels[0].file.url"
        target="_blank"
        >Open label</a
      >
      <div
        class="mt-2 text-xs text-gray-500"
        *ngIf="!fulfillment.labels[0]?.file?.thumbnail"
      >
        No thumbnail
      </div>
    </rc-card>
  </div>
</section>

<rc-card
  title="Tracking"
  class="mt-4"
>
  <ng-container *ngIf="!fulfillment.trackings; else tracking">
    <div class="text-sm text-gray-500">No tracking events yet.</div>
    <!-- scale down button -->
    <button
      vcl-button
      class="mt-2"
    >
      Add tracking
    </button>
  </ng-container>
  <ng-template #tracking>
    <!-- render events when present -->
  </ng-template>
</rc-card>
