<vcl-drawer-container>
  <vcl-drawer [opened]="(collapsed$ | async) || false">
    <div class="h-100p col">
      <div class="flex">
        <vcl-navigation>
          @for (item of (facade.visibleNavItems$ | async); track $index) {
          <vcl-navigation-item
            (click)="navigate(item); $event.stopPropagation()"
          >
            <vcl-navigation-label>
              <vcl-icogram>
                <vcl-icon
                  vclPrepend
                  [icon]="item.icon"
                ></vcl-icon>
                {{ item.label }}
              </vcl-icogram>
            </vcl-navigation-label>

            @if (item.children?.length) {
            <vcl-navigation>
              @for (child of item.children; track $index) {
              <vcl-navigation-item
                (click)="navigate(child); $event.stopPropagation()"
              >
                <vcl-navigation-label>
                  <vcl-icogram>
                    <vcl-icon
                      vclPrepend
                      [icon]="child.icon"
                    ></vcl-icon>
                    {{ child.label }}
                  </vcl-icogram>
                </vcl-navigation-label>
              </vcl-navigation-item>
              }
            </vcl-navigation>
            }
          </vcl-navigation-item>
          }
        </vcl-navigation>
      </div>
    </div>
  </vcl-drawer>

  <header>
    <rs-breadcrumb
      [rootLabel]="'Home'"
      [rootUrl]="'/'"
      [breadcrumbsToExclude]="['Home']"
    />
    <div class="flex"></div>

    <rs-header-toolbar
      [user]="user$ | async"
      [organizations]="(orgs$ | async) || []"
      [selectedOrganizationId]="selectedOrgId$ | async"
      (organizationSelected)="onOrgSelected($event)"
      (accountAction)="onAccountAction($event)"
    />
  </header>

  <main class="flex rc-main">
    <router-outlet />
  </main>
</vcl-drawer-container>

<ng-content select="rc-footer" />
