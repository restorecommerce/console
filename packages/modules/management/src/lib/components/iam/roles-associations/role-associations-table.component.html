<rc-table>
  <table>
    <thead>
      <tr>
        <th>Role</th>
        <th>Attributes</th>
        <th class="w-5p align-centered"></th>
      </tr>
    </thead>
    <tbody>
      @for (ra of user.roleAssociations; track ra.id) {
      <tr class="role-association-row">
        <td>{{ ra.role }}</td>
        <td>
          @if (attrPairs(ra.attributes).length) {
          <vcl-data-list
            mode="none"
            [noBorder]="true"
          >
            @for (p of attrPairs(ra.attributes); track $index) {
            <vcl-data-list-item>
              <div class="row align-items-center">
                <span>{{ p.path }}:</span>
                <code>{{ p.value || '—' }}</code>
              </div>
            </vcl-data-list-item>
            }
          </vcl-data-list>
          } @else { — }
        </td>
        <td>
          <div
            #target
            class="d-inline"
          >
            <button
              vcl-button
              square
              class="transparent"
              title="More"
              type="button"
              (click)="roleAssoMenu.toggle()"
            >
              <span class="icon mdi mdi-dots-vertical"></span>
            </button>
          </div>

          <ng-template
            vclPopover
            #roleAssoMenu="vclPopover"
            [target]="target"
            (afterClose)="roleAssoMenu.close()"
            [positions]="positions"
          >
            <rc-context-menu
              [items]="roleMenuItems"
              (select)="onRoleAssociationMenu($event); roleAssoMenu.close()"
            ></rc-context-menu>
          </ng-template>
        </td>
      </tr>
      }
    </tbody>
  </table>
</rc-table>
